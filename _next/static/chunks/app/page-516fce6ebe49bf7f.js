(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[974],{6490:()=>{},4483:(e,l,a)=>{Promise.resolve().then(a.bind(a,5229))},5229:(e,l,a)=>{"use strict";a.r(l),a.d(l,{default:()=>x});var t=a(5155),r=a(2115),s=a(2426),d=a.n(s);let c="/villa",n={};async function i(e){if(n[e])return n[e];let l=await d()({locateFile:()=>"".concat(c,"/sql-wasm.wasm")}),a=await fetch(e),t=await a.arrayBuffer(),r=new l.Database(new Uint8Array(t));return n[e]=r,r}let o={multiFamilySale:"multi_family_sale",multiFamilyRent:"multi_family_rent",detachedSale:"detached_sale",detachedRent:"detached_rent",officetelSale:"officetel_sale",officetelRent:"officetel_rent"};async function h(){for(let e of Object.values(o))await i("".concat(c,"/db/").concat(e,".db"))}async function m(e){let l=[];for(let a of Object.values(o)){let t=(await i("".concat(c,"/db/").concat(a,".db"))).prepare("SELECT id, address, lat, lng FROM ".concat(a," WHERE address LIKE ? LIMIT 5"));for(t.bind(["%".concat(e,"%")]);t.step();){let e=t.getAsObject();l.push(e)}}return l}async function b(e,l,a){let t={multiFamilySale:[],multiFamilyRent:[],detachedSale:[],detachedRent:[],officetelSale:[],officetelRent:[]},r=a-5,s=a+5;for(let[a,d]of Object.entries(o)){let n=(await i("".concat(c,"/db/").concat(d,".db"))).prepare("\n      SELECT * FROM ".concat(d,"\n      WHERE area BETWEEN ? AND ?\n      ORDER BY ABS(lat - ?) + ABS(lng - ?)\n      LIMIT 10\n    "));for(n.bind([r,s,e,l]);n.step();){let e=n.getAsObject();t[a].push(e)}}return t}let u=[{key:"multiFamily",label:"연립다세대"},{key:"detached",label:"단독다가구"},{key:"officetel",label:"오피스텔"}];function x(){var e,l,a;let[s,d]=(0,r.useState)(""),[c,n]=(0,r.useState)([]),[i,o]=(0,r.useState)({}),[x,j]=(0,r.useState)("multiFamily"),[p,N]=(0,r.useState)(null),[f,v]=(0,r.useState)(""),[g,y]=(0,r.useState)(!1);(0,r.useEffect)(()=>{h()},[]);let w=async e=>{d(e.target.value),e.target.value?n(await m(e.target.value)):n([])},S=async()=>{if(!p){alert("주소를 선택해주세요.");return}if(!f){alert("면적을 입력해주세요.");return}y(!0);let{lat:e,lng:l}=p;o(await b(e,l,parseFloat(f))),y(!1)};return(0,t.jsxs)("div",{className:"p-6 max-w-4xl mx-auto",children:[(0,t.jsx)("h1",{className:"text-2xl font-bold mb-4",children:"빌라 시세 검색"}),(0,t.jsxs)("div",{className:"p-4 bg-gray-100 border rounded mb-4",children:[(0,t.jsx)("h3",{className:"text-lg font-semibold mb-2",children:"\uD83D\uDD0D 검색 안내"}),(0,t.jsxs)("ul",{className:"list-disc pl-5 text-sm",children:[(0,t.jsx)("li",{children:"해당 주소와 가까운, 비슷한 면적의 거래 내역을 보여드립니다."}),(0,t.jsx)("li",{children:"조회되는 데이터는 2024/12/31까지의 데이터입니다."}),(0,t.jsx)("li",{children:"서울 지역의 정보만 검색이 가능합니다."}),(0,t.jsxs)("li",{children:["데이터 출처: ",(0,t.jsx)("a",{href:"https://rt.molit.go.kr/",className:"text-blue-500",target:"_blank",rel:"noopener noreferrer",children:"국토교통부 실거래가 공개시스템"})]})]})]}),(0,t.jsx)("input",{type:"number",value:f,onChange:e=>v(e.target.value),placeholder:"면적 입력 (㎡)",className:"border p-2 w-full mt-2 rounded"}),(0,t.jsx)("input",{type:"text",value:s,onChange:w,placeholder:"주소 검색...",className:"border p-2 w-full mt-2 rounded"}),c.length>0&&(0,t.jsx)("ul",{className:"border mt-2 bg-white shadow-lg absolute w-full z-10",children:c.map(e=>(0,t.jsx)("li",{className:"cursor-pointer hover:bg-gray-200 p-2",onClick:()=>{d(e.address),n([]),N({lat:e.lat,lng:e.lng})},children:e.address},e.id))}),(0,t.jsx)("button",{onClick:S,className:"bg-blue-500 text-white px-4 py-2 rounded mt-2 w-full",children:"검색"}),g&&(0,t.jsx)("div",{className:"flex justify-center mt-4",children:(0,t.jsx)("div",{className:"animate-spin border-t-4 border-blue-500 border-solid w-8 h-8 rounded-full"})}),(0,t.jsxs)("div",{className:"mt-6",children:[(0,t.jsx)("h2",{className:"text-lg font-semibold mb-2",children:"\uD83C\uDFE1 거래 내역"}),(0,t.jsx)("div",{className:"flex border-b mb-4",children:u.map(e=>(0,t.jsx)("button",{className:"px-4 py-2 font-semibold ".concat(x===e.key?"border-b-2 border-blue-500 text-blue-500":"text-gray-500"),onClick:()=>j(e.key),children:e.label},e.key))}),(0,t.jsx)("h3",{className:"text-md font-semibold mt-4 mb-2",children:"\uD83D\uDCB0 매매"}),(0,t.jsxs)("table",{className:"w-full border-collapse border text-sm",children:[(0,t.jsx)("thead",{children:(0,t.jsxs)("tr",{className:"bg-gray-100",children:[(0,t.jsx)("th",{className:"border p-2",children:"거래 날짜"}),(0,t.jsx)("th",{className:"border p-2",children:"주소"}),(0,t.jsx)("th",{className:"border p-2",children:"면적 (㎡)"}),(0,t.jsx)("th",{className:"border p-2",children:"층"}),(0,t.jsx)("th",{className:"border p-2",children:"매매 (만원)"})]})}),(0,t.jsx)("tbody",{children:null===(e=i["".concat(x,"Sale")])||void 0===e?void 0:e.map((e,l)=>{var a,r,s;return(0,t.jsxs)("tr",{className:"border-b",children:[(0,t.jsx)("td",{className:"border p-2",children:e.transaction_date}),(0,t.jsx)("td",{className:"border p-2",children:e.address}),(0,t.jsx)("td",{className:"border p-2",children:e.area}),(0,t.jsx)("td",{className:"border p-2",children:null!==(r=e.floor)&&void 0!==r?r:"-"}),(0,t.jsx)("td",{className:"border p-2 text-right",children:null!==(s=null===(a=e.price)||void 0===a?void 0:a.toLocaleString())&&void 0!==s?s:"-"})]},l)})})]}),(0,t.jsx)("h3",{className:"text-md font-semibold mt-6 mb-2",children:"\uD83C\uDFE0 전세"}),(0,t.jsxs)("table",{className:"w-full border-collapse border text-sm",children:[(0,t.jsx)("thead",{children:(0,t.jsxs)("tr",{className:"bg-gray-100",children:[(0,t.jsx)("th",{className:"border p-2",children:"거래 날짜"}),(0,t.jsx)("th",{className:"border p-2",children:"주소"}),(0,t.jsx)("th",{className:"border p-2",children:"면적 (㎡)"}),(0,t.jsx)("th",{className:"border p-2",children:"층"}),(0,t.jsx)("th",{className:"border p-2",children:"전세 (만원)"})]})}),(0,t.jsx)("tbody",{children:null===(l=i["".concat(x,"Rent")])||void 0===l?void 0:l.filter(e=>"전세"===e.transaction_type).map((e,l)=>{var a,r,s;return(0,t.jsxs)("tr",{className:"border-b",children:[(0,t.jsx)("td",{className:"border p-2",children:e.transaction_date}),(0,t.jsx)("td",{className:"border p-2",children:e.address}),(0,t.jsx)("td",{className:"border p-2",children:e.area}),(0,t.jsx)("td",{className:"border p-2",children:null!==(r=e.floor)&&void 0!==r?r:"-"}),(0,t.jsx)("td",{className:"border p-2 text-right",children:null!==(s=null===(a=e.deposit)||void 0===a?void 0:a.toLocaleString())&&void 0!==s?s:"-"})]},l)})})]}),(0,t.jsx)("h3",{className:"text-md font-semibold mt-6 mb-2",children:"\uD83C\uDFE0 월세"}),(0,t.jsxs)("table",{className:"w-full border-collapse border text-sm",children:[(0,t.jsx)("thead",{children:(0,t.jsxs)("tr",{className:"bg-gray-100",children:[(0,t.jsx)("th",{className:"border p-2",children:"거래 날짜"}),(0,t.jsx)("th",{className:"border p-2",children:"주소"}),(0,t.jsx)("th",{className:"border p-2",children:"면적 (㎡)"}),(0,t.jsx)("th",{className:"border p-2",children:"층"}),(0,t.jsx)("th",{className:"border p-2",children:"보증금 (만원)"}),(0,t.jsx)("th",{className:"border p-2",children:"월세 (만원)"})]})}),(0,t.jsx)("tbody",{children:null===(a=i["".concat(x,"Rent")])||void 0===a?void 0:a.filter(e=>"월세"===e.transaction_type).map((e,l)=>{var a,r,s,d,c;return(0,t.jsxs)("tr",{className:"border-b",children:[(0,t.jsx)("td",{className:"border p-2",children:e.transaction_date}),(0,t.jsx)("td",{className:"border p-2",children:e.address}),(0,t.jsx)("td",{className:"border p-2",children:e.area}),(0,t.jsx)("td",{className:"border p-2",children:null!==(s=e.floor)&&void 0!==s?s:"-"}),(0,t.jsx)("td",{className:"border p-2 text-right",children:null!==(d=null===(a=e.deposit)||void 0===a?void 0:a.toLocaleString())&&void 0!==d?d:"-"}),(0,t.jsx)("td",{className:"border p-2 text-right",children:null!==(c=null===(r=e.rent)||void 0===r?void 0:r.toLocaleString())&&void 0!==c?c:"-"})]},l)})})]})]})]})}}},e=>{var l=l=>e(e.s=l);e.O(0,[268,367,441,517,358],()=>l(4483)),_N_E=e.O()}]);