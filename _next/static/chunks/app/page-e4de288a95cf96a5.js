(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[974],{6490:()=>{},4483:(e,l,a)=>{Promise.resolve().then(a.bind(a,5229))},5229:(e,l,a)=>{"use strict";a.r(l),a.d(l,{default:()=>x});var r=a(5155),s=a(2115),t=a(2426),d=a.n(t);let c="/villa",n={};async function i(e){if(n[e])return n[e];let l=await d()({locateFile:()=>"".concat(c,"/sql-wasm.wasm")}),a=await fetch(e),r=await a.arrayBuffer(),s=new l.Database(new Uint8Array(r));return n[e]=s,s}let o={multiFamilySale:"multi_family_sale",multiFamilyRent:"multi_family_rent",detachedSale:"detached_sale",detachedRent:"detached_rent",officetelSale:"officetel_sale",officetelRent:"officetel_rent"};async function h(){for(let e of Object.values(o))await i("".concat(c,"/db/").concat(e,".db"))}async function m(e){let l=[];for(let a of Object.values(o)){let r=(await i("".concat(c,"/db/").concat(a,".db"))).prepare("SELECT id, address, lat, lng FROM ".concat(a," WHERE address LIKE ? LIMIT 5"));for(r.bind(["%".concat(e,"%")]);r.step();){let e=r.getAsObject();l.push(e)}}return l}async function b(e,l,a){let r={multiFamilySale:[],multiFamilyRent:[],detachedSale:[],detachedRent:[],officetelSale:[],officetelRent:[]},s=a-5,t=a+5;for(let[a,d]of Object.entries(o)){let n=(await i("".concat(c,"/db/").concat(d,".db"))).prepare("\n      SELECT * FROM ".concat(d,"\n      WHERE area BETWEEN ? AND ?\n      ORDER BY ABS(lat - ?) + ABS(lng - ?)\n      LIMIT 10\n    "));for(n.bind([s,t,e,l]);n.step();){let e=n.getAsObject();r[a].push(e)}}return r}let u=[{key:"multiFamily",label:"연립다세대"},{key:"detached",label:"단독다가구"},{key:"officetel",label:"오피스텔"}];function x(){var e,l,a;let[t,d]=(0,s.useState)(""),[c,n]=(0,s.useState)([]),[i,o]=(0,s.useState)({}),[x,j]=(0,s.useState)("multiFamily"),[p,f]=(0,s.useState)(null),[N,v]=(0,s.useState)(""),[g,y]=(0,s.useState)(!0),[w,S]=(0,s.useState)(!1);(0,s.useEffect)(()=>{h().then(()=>y(!1))},[]);let E=async e=>{d(e.target.value),e.target.value?n(await m(e.target.value)):n([])},_=async()=>{if(!p){alert("주소를 선택해주세요.");return}if(!N){alert("면적을 입력해주세요.");return}S(!0);let{lat:e,lng:l}=p;o(await b(e,l,parseFloat(N))),S(!1)};return(0,r.jsxs)("div",{className:"p-6 max-w-4xl mx-auto",children:[(0,r.jsx)("h1",{className:"text-2xl font-bold mb-4",children:"빌라 시세 검색"}),(0,r.jsxs)("div",{className:"p-4 bg-gray-100 border rounded mb-4",children:[(0,r.jsx)("h3",{className:"text-lg font-semibold mb-2",children:"\uD83D\uDD0D 검색 안내"}),(0,r.jsxs)("ul",{className:"list-disc pl-5 text-sm",children:[(0,r.jsx)("li",{children:"해당 주소와 가까운, 비슷한 면적의 거래 내역을 보여드립니다."}),(0,r.jsx)("li",{children:"조회되는 데이터는 2024/12/31까지의 데이터입니다."}),(0,r.jsx)("li",{children:"서울 지역의 정보만 검색이 가능합니다."}),(0,r.jsxs)("li",{children:["데이터 출처: ",(0,r.jsx)("a",{href:"https://rt.molit.go.kr/",className:"text-blue-500",target:"_blank",rel:"noopener noreferrer",children:"국토교통부 실거래가 공개시스템"})]})]})]}),g?(0,r.jsx)("div",{className:"mt-6 flex justify-center items-center min-h-[300px]",children:(0,r.jsx)("div",{className:"animate-spin border-t-4 border-blue-500 border-solid w-10 h-10 rounded-full"})}):(0,r.jsxs)("div",{children:[(0,r.jsx)("input",{type:"number",value:N,onChange:e=>v(e.target.value),placeholder:"면적 입력 (㎡)",className:"border p-2 w-full mt-2 rounded"}),(0,r.jsx)("input",{type:"text",value:t,onChange:E,placeholder:"주소 검색...",className:"border p-2 w-full mt-2 rounded"}),c.length>0&&(0,r.jsx)("ul",{className:"border mt-2 bg-white shadow-lg absolute w-full z-10",children:c.map(e=>(0,r.jsx)("li",{className:"cursor-pointer hover:bg-gray-200 p-2",onClick:()=>{d(e.address),n([]),f({lat:e.lat,lng:e.lng})},children:e.address},e.id))}),(0,r.jsx)("button",{onClick:_,className:"bg-blue-500 text-white px-4 py-2 rounded mt-2 w-full",children:"검색"})]}),w&&(0,r.jsx)("div",{className:"flex justify-center mt-4",children:(0,r.jsx)("div",{className:"animate-spin border-t-4 border-blue-500 border-solid w-8 h-8 rounded-full"})}),(0,r.jsxs)("div",{className:"mt-6",children:[(0,r.jsx)("h2",{className:"text-lg font-semibold mb-2",children:"\uD83C\uDFE1 거래 내역"}),(0,r.jsx)("div",{className:"flex border-b mb-4",children:u.map(e=>(0,r.jsx)("button",{className:"px-4 py-2 font-semibold ".concat(x===e.key?"border-b-2 border-blue-500 text-blue-500":"text-gray-500"),onClick:()=>j(e.key),children:e.label},e.key))}),(0,r.jsx)("h3",{className:"text-md font-semibold mt-4 mb-2",children:"\uD83D\uDCB0 매매"}),(0,r.jsxs)("table",{className:"w-full border-collapse border text-sm",children:[(0,r.jsx)("thead",{children:(0,r.jsxs)("tr",{className:"bg-gray-100",children:[(0,r.jsx)("th",{className:"border p-2",children:"거래 날짜"}),(0,r.jsx)("th",{className:"border p-2",children:"주소"}),(0,r.jsx)("th",{className:"border p-2",children:"면적 (㎡)"}),(0,r.jsx)("th",{className:"border p-2",children:"층"}),(0,r.jsx)("th",{className:"border p-2",children:"매매 (만원)"})]})}),(0,r.jsx)("tbody",{children:null===(e=i["".concat(x,"Sale")])||void 0===e?void 0:e.map((e,l)=>{var a,s,t;return(0,r.jsxs)("tr",{className:"border-b",children:[(0,r.jsx)("td",{className:"border p-2",children:e.transaction_date}),(0,r.jsx)("td",{className:"border p-2",children:e.address}),(0,r.jsx)("td",{className:"border p-2",children:e.area}),(0,r.jsx)("td",{className:"border p-2",children:null!==(s=e.floor)&&void 0!==s?s:"-"}),(0,r.jsx)("td",{className:"border p-2 text-right",children:null!==(t=null===(a=e.price)||void 0===a?void 0:a.toLocaleString())&&void 0!==t?t:"-"})]},l)})})]}),(0,r.jsx)("h3",{className:"text-md font-semibold mt-6 mb-2",children:"\uD83C\uDFE0 전세"}),(0,r.jsxs)("table",{className:"w-full border-collapse border text-sm",children:[(0,r.jsx)("thead",{children:(0,r.jsxs)("tr",{className:"bg-gray-100",children:[(0,r.jsx)("th",{className:"border p-2",children:"거래 날짜"}),(0,r.jsx)("th",{className:"border p-2",children:"주소"}),(0,r.jsx)("th",{className:"border p-2",children:"면적 (㎡)"}),(0,r.jsx)("th",{className:"border p-2",children:"층"}),(0,r.jsx)("th",{className:"border p-2",children:"전세 (만원)"})]})}),(0,r.jsx)("tbody",{children:null===(l=i["".concat(x,"Rent")])||void 0===l?void 0:l.filter(e=>"전세"===e.transaction_type).map((e,l)=>{var a,s,t;return(0,r.jsxs)("tr",{className:"border-b",children:[(0,r.jsx)("td",{className:"border p-2",children:e.transaction_date}),(0,r.jsx)("td",{className:"border p-2",children:e.address}),(0,r.jsx)("td",{className:"border p-2",children:e.area}),(0,r.jsx)("td",{className:"border p-2",children:null!==(s=e.floor)&&void 0!==s?s:"-"}),(0,r.jsx)("td",{className:"border p-2 text-right",children:null!==(t=null===(a=e.deposit)||void 0===a?void 0:a.toLocaleString())&&void 0!==t?t:"-"})]},l)})})]}),(0,r.jsx)("h3",{className:"text-md font-semibold mt-6 mb-2",children:"\uD83C\uDFE0 월세"}),(0,r.jsxs)("table",{className:"w-full border-collapse border text-sm",children:[(0,r.jsx)("thead",{children:(0,r.jsxs)("tr",{className:"bg-gray-100",children:[(0,r.jsx)("th",{className:"border p-2",children:"거래 날짜"}),(0,r.jsx)("th",{className:"border p-2",children:"주소"}),(0,r.jsx)("th",{className:"border p-2",children:"면적 (㎡)"}),(0,r.jsx)("th",{className:"border p-2",children:"층"}),(0,r.jsx)("th",{className:"border p-2",children:"보증금 (만원)"}),(0,r.jsx)("th",{className:"border p-2",children:"월세 (만원)"})]})}),(0,r.jsx)("tbody",{children:null===(a=i["".concat(x,"Rent")])||void 0===a?void 0:a.filter(e=>"월세"===e.transaction_type).map((e,l)=>{var a,s,t,d,c;return(0,r.jsxs)("tr",{className:"border-b",children:[(0,r.jsx)("td",{className:"border p-2",children:e.transaction_date}),(0,r.jsx)("td",{className:"border p-2",children:e.address}),(0,r.jsx)("td",{className:"border p-2",children:e.area}),(0,r.jsx)("td",{className:"border p-2",children:null!==(t=e.floor)&&void 0!==t?t:"-"}),(0,r.jsx)("td",{className:"border p-2 text-right",children:null!==(d=null===(a=e.deposit)||void 0===a?void 0:a.toLocaleString())&&void 0!==d?d:"-"}),(0,r.jsx)("td",{className:"border p-2 text-right",children:null!==(c=null===(s=e.rent)||void 0===s?void 0:s.toLocaleString())&&void 0!==c?c:"-"})]},l)})})]})]})]})}}},e=>{var l=l=>e(e.s=l);e.O(0,[268,367,441,517,358],()=>l(4483)),_N_E=e.O()}]);