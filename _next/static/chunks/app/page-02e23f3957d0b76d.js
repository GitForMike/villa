(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[974],{6490:()=>{},4483:(e,l,t)=>{Promise.resolve().then(t.bind(t,5229))},5229:(e,l,t)=>{"use strict";t.r(l),t.d(l,{default:()=>x});var a=t(5155),r=t(2115),s=t(2426),d=t.n(s);let c="/villa",n={};async function i(e){var l;let t;if(n[e])return n[e];try{t=await d()({locateFile:e=>"".concat(c,"/").concat(e)}),console.log("initSqlJs 성공!")}catch(e){throw console.error("initSqlJs 초기화 오류:",e),e}console.log("DB 파일 경로:",e);let a=null!==(l=e.split("/").pop())&&void 0!==l?l:"",r=window;if(r.localDbPathMap){let l=r.localDbPathMap[a];l&&(e=l)}console.log(e);let s=await fetch(e),i=await s.arrayBuffer(),o=new t.Database(new Uint8Array(i));return n[e]=o,o}let o={multiFamilySale:"multi_family_sale",multiFamilyRent:"multi_family_rent",detachedSale:"detached_sale",detachedRent:"detached_rent",officetelSale:"officetel_sale",officetelRent:"officetel_rent"};async function h(){for(let e of Object.values(o))await i("".concat(c,"/db/").concat(e,".db"))}async function m(e){let l=[];for(let t of Object.values(o)){let a=(await i("".concat(c,"/db/").concat(t,".db"))).prepare("SELECT id, address, lat, lng FROM ".concat(t," WHERE address LIKE ? LIMIT 5"));for(a.bind(["%".concat(e,"%")]);a.step();){let e=a.getAsObject();l.push(e)}}return l.map((e,l)=>({...e,id:l}))}async function b(e,l,t){let a={multiFamilySale:[],multiFamilyRent:[],detachedSale:[],detachedRent:[],officetelSale:[],officetelRent:[]},r=t-5,s=t+5;for(let[t,d]of Object.entries(o)){let n=(await i("".concat(c,"/db/").concat(d,".db"))).prepare("\n      SELECT * FROM ".concat(d,"\n      WHERE area BETWEEN ? AND ?\n      AND lat IS NOT NULL and lng IS NOT NULL\n      ORDER BY ABS(lat - ?) + ABS(lng - ?)\n      LIMIT 10\n    "));for(n.bind([r,s,e,l]);n.step();){let e=n.getAsObject();a[t].push(e)}}for(let e in a)a[e].sort((e,l)=>{let t=new Date(e.transaction_date);return new Date(l.transaction_date).getTime()-t.getTime()});return a}let u=[{key:"multiFamily",label:"연립다세대"},{key:"detached",label:"단독다가구"},{key:"officetel",label:"오피스텔"}];function x(){var e,l,t;let[s,d]=(0,r.useState)(""),[c,n]=(0,r.useState)([]),[i,o]=(0,r.useState)({}),[x,p]=(0,r.useState)("multiFamily"),[j,N]=(0,r.useState)(null),[f,v]=(0,r.useState)(""),[g,y]=(0,r.useState)(!0),[w,S]=(0,r.useState)(!1);(0,r.useEffect)(()=>{h().then(()=>y(!1))},[]);let D=async e=>{d(e.target.value),e.target.value?n(await m(e.target.value)):n([])},_=async()=>{if(!j){alert("주소를 선택해주세요.");return}if(!f){alert("면적을 입력해주세요.");return}S(!0);let{lat:e,lng:l}=j;o(await b(e,l,parseFloat(f))),S(!1)};return(0,a.jsxs)("div",{className:"p-6 max-w-4xl mx-auto",children:[(0,a.jsx)("h1",{className:"text-2xl font-bold mb-4",children:"빌라 시세 검색"}),(0,a.jsxs)("div",{className:"p-4 bg-gray-100 border rounded mb-4",children:[(0,a.jsx)("h3",{className:"text-lg font-semibold mb-2",children:"\uD83D\uDD0D 검색 안내"}),(0,a.jsxs)("ul",{className:"list-disc pl-5 text-sm",children:[(0,a.jsx)("li",{children:"해당 주소와 가까운, 비슷한 면적의 거래 내역을 보여드립니다."}),(0,a.jsx)("li",{children:"조회되는 데이터는 2025/3/31까지의 데이터입니다."}),(0,a.jsx)("li",{children:"서울 지역의 정보만 검색이 가능합니다."}),(0,a.jsxs)("li",{children:["데이터 출처: ",(0,a.jsx)("a",{href:"https://rt.molit.go.kr/",className:"text-blue-500",target:"_blank",rel:"noopener noreferrer",children:"국토교통부 실거래가 공개시스템"})]})]})]}),g?(0,a.jsx)("div",{className:"mt-6 flex justify-center items-center min-h-[300px]",children:(0,a.jsx)("div",{className:"animate-spin border-t-4 border-blue-500 border-solid w-10 h-10 rounded-full"})}):(0,a.jsxs)("div",{children:[(0,a.jsx)("input",{type:"number",value:f,onChange:e=>v(e.target.value),placeholder:"면적 입력 (㎡)",className:"border p-2 w-full mt-2 rounded"}),(0,a.jsx)("input",{type:"text",value:s,onChange:D,placeholder:"주소 검색...",className:"border p-2 w-full mt-2 rounded"}),c.length>0&&(0,a.jsx)("ul",{className:"border mt-2 bg-white shadow-lg absolute w-full z-10",children:c.map(e=>(0,a.jsx)("li",{className:"cursor-pointer hover:bg-gray-200 p-2",onClick:()=>{d(e.address),n([]),N({lat:e.lat,lng:e.lng})},children:e.address},e.id))}),(0,a.jsx)("button",{onClick:_,className:"bg-blue-500 text-white px-4 py-2 rounded mt-2 w-full",children:"검색"})]}),w&&(0,a.jsx)("div",{className:"flex justify-center mt-4",children:(0,a.jsx)("div",{className:"animate-spin border-t-4 border-blue-500 border-solid w-8 h-8 rounded-full"})}),(0,a.jsxs)("div",{className:"mt-6",children:[(0,a.jsx)("h2",{className:"text-lg font-semibold mb-2",children:"\uD83C\uDFE1 거래 내역"}),(0,a.jsx)("div",{className:"flex border-b mb-4",children:u.map(e=>(0,a.jsx)("button",{className:"px-4 py-2 font-semibold ".concat(x===e.key?"border-b-2 border-blue-500 text-blue-500":"text-gray-500"),onClick:()=>p(e.key),children:e.label},e.key))}),(0,a.jsx)("h3",{className:"text-md font-semibold mt-4 mb-2",children:"\uD83D\uDCB0 매매"}),(0,a.jsxs)("table",{className:"w-full border-collapse border text-sm",children:[(0,a.jsx)("thead",{children:(0,a.jsxs)("tr",{className:"bg-gray-100",children:[(0,a.jsx)("th",{className:"border p-2",children:"거래 날짜"}),(0,a.jsx)("th",{className:"border p-2",children:"주소"}),(0,a.jsx)("th",{className:"border p-2",children:"면적 (㎡)"}),(0,a.jsx)("th",{className:"border p-2",children:"층"}),(0,a.jsx)("th",{className:"border p-2",children:"매매 (만원)"})]})}),(0,a.jsx)("tbody",{children:null===(e=i["".concat(x,"Sale")])||void 0===e?void 0:e.map((e,l)=>{var t,r,s;return(0,a.jsxs)("tr",{className:"border-b",children:[(0,a.jsx)("td",{className:"border p-2",children:e.transaction_date}),(0,a.jsx)("td",{className:"border p-2",children:e.address}),(0,a.jsx)("td",{className:"border p-2",children:e.area}),(0,a.jsx)("td",{className:"border p-2",children:null!==(r=e.floor)&&void 0!==r?r:"-"}),(0,a.jsx)("td",{className:"border p-2 text-right",children:null!==(s=null===(t=e.price)||void 0===t?void 0:t.toLocaleString())&&void 0!==s?s:"-"})]},l)})})]}),(0,a.jsx)("h3",{className:"text-md font-semibold mt-6 mb-2",children:"\uD83C\uDFE0 전세"}),(0,a.jsxs)("table",{className:"w-full border-collapse border text-sm",children:[(0,a.jsx)("thead",{children:(0,a.jsxs)("tr",{className:"bg-gray-100",children:[(0,a.jsx)("th",{className:"border p-2",children:"거래 날짜"}),(0,a.jsx)("th",{className:"border p-2",children:"주소"}),(0,a.jsx)("th",{className:"border p-2",children:"면적 (㎡)"}),(0,a.jsx)("th",{className:"border p-2",children:"층"}),(0,a.jsx)("th",{className:"border p-2",children:"전세 (만원)"})]})}),(0,a.jsx)("tbody",{children:null===(l=i["".concat(x,"Rent")])||void 0===l?void 0:l.filter(e=>"전세"===e.transaction_type).map((e,l)=>{var t,r,s;return(0,a.jsxs)("tr",{className:"border-b",children:[(0,a.jsx)("td",{className:"border p-2",children:e.transaction_date}),(0,a.jsx)("td",{className:"border p-2",children:e.address}),(0,a.jsx)("td",{className:"border p-2",children:e.area}),(0,a.jsx)("td",{className:"border p-2",children:null!==(r=e.floor)&&void 0!==r?r:"-"}),(0,a.jsx)("td",{className:"border p-2 text-right",children:null!==(s=null===(t=e.deposit)||void 0===t?void 0:t.toLocaleString())&&void 0!==s?s:"-"})]},l)})})]}),(0,a.jsx)("h3",{className:"text-md font-semibold mt-6 mb-2",children:"\uD83C\uDFE0 월세"}),(0,a.jsxs)("table",{className:"w-full border-collapse border text-sm",children:[(0,a.jsx)("thead",{children:(0,a.jsxs)("tr",{className:"bg-gray-100",children:[(0,a.jsx)("th",{className:"border p-2",children:"거래 날짜"}),(0,a.jsx)("th",{className:"border p-2",children:"주소"}),(0,a.jsx)("th",{className:"border p-2",children:"면적 (㎡)"}),(0,a.jsx)("th",{className:"border p-2",children:"층"}),(0,a.jsx)("th",{className:"border p-2",children:"보증금 (만원)"}),(0,a.jsx)("th",{className:"border p-2",children:"월세 (만원)"})]})}),(0,a.jsx)("tbody",{children:null===(t=i["".concat(x,"Rent")])||void 0===t?void 0:t.filter(e=>"월세"===e.transaction_type).map((e,l)=>{var t,r,s,d,c;return(0,a.jsxs)("tr",{className:"border-b",children:[(0,a.jsx)("td",{className:"border p-2",children:e.transaction_date}),(0,a.jsx)("td",{className:"border p-2",children:e.address}),(0,a.jsx)("td",{className:"border p-2",children:e.area}),(0,a.jsx)("td",{className:"border p-2",children:null!==(s=e.floor)&&void 0!==s?s:"-"}),(0,a.jsx)("td",{className:"border p-2 text-right",children:null!==(d=null===(t=e.deposit)||void 0===t?void 0:t.toLocaleString())&&void 0!==d?d:"-"}),(0,a.jsx)("td",{className:"border p-2 text-right",children:null!==(c=null===(r=e.rent)||void 0===r?void 0:r.toLocaleString())&&void 0!==c?c:"-"})]},l)})})]})]})]})}}},e=>{var l=l=>e(e.s=l);e.O(0,[268,367,441,517,358],()=>l(4483)),_N_E=e.O()}]);